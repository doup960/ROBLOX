local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Highlight = Instance.new("Highlight")

-- Function to create a highlight for a player
local function highlightPlayer(player)
    local char = player.Character
    if char and player ~= LocalPlayer then
        local highlightClone = Highlight:Clone()
        highlightClone.Parent = char

        -- Set highlight properties
        highlightClone.FillColor = Color3.fromRGB(255, 0, 0) -- Change to desired color
        highlightClone.OutlineColor = Color3.fromRGB(0, 0, 0) -- Change to desired outline color
        highlightClone.Enabled = true

        -- Create custom nametag
        local nametag = Instance.new("BillboardGui")
        nametag.Adornee = char:WaitForChild("Head")
        nametag.Size = UDim2.new(0, 100, 0, 50)
        nametag.StudsOffset = Vector3.new(0, 3, 0) -- Adjust height offset

        local textLabel = Instance.new("TextLabel", nametag)
        textLabel.Size = UDim2.new(1, 0, 1, 0)
        textLabel.BackgroundTransparency = 1
        textLabel.Text = player.Name
        textLabel.TextColor3 = Color3.fromRGB(255, 255, 255) -- Change text color as needed
        textLabel.TextScaled = true

        nametag.Parent = char

        -- Clean up when the character is removed
        char.AncestryChanged:Connect(function(_, parent)
            if not parent then
                highlightClone:Destroy()
                nametag:Destroy()
            end
        end)
    end
end

highlightPlayer(LocalPlayer)
